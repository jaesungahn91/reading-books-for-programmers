## 15-1 파일과 디렉터리
### 파일
- 파일이란 하드 디스카나 SSD와 같은 보조기억장치에 저장된 관련 정보의 집합을 의미
- 모든 파일에는 이름과 파일을 실행하기 위한 정보, 그리고 파일 관련 부가 정보가 있다. 이 부가 정보를 속성 또는 메타데이터라고 부른다.

**파일 속성과 유형**
- 파일 속성 중 파일 유형은 운영체제가 인식하는 파일 종류를 나타낸다.
- 파일 유형을 알리기 위해 가장 흔히 사용하는 방식은 파일 이름 뒤에 붙는 확장자를 이용하는 것이다.

**파일 연산을 위한 시스템 호출**
- 파일을 다루는 모든 작업은 운영체제에 의해 이뤄진다. 이를 위해 시스템 호출을 사용한다.

### 디렉터리
- 파일들을 일목요연하게 관리하기 위해 디렉터리를 이용한다. 윈도우 운영체제에서는 디렉터리를 폴더라고 부른다.
- 1단계 디렉터리 : 모든 파일이 하나의 디렉터리 아래에 있는 것
- 트리 구조 디렉터리 : 여러 계층을 가진 디렉터리
	- 최상위 디렉터리는 루트(/) 디렉터리라 부른다.

**절대 경로와 상대 경로**
- 절대 경로 : 루트 디렉터리에서 자기 자신까지 이르는 고유한 경로
- 상대 경로 : 현재 디렉터리부터 시작하는 경로

**디렉터리 엔트리**
- 디렉터리도 파일
- 디렉터리는 내부에 해당 디렉터리에 담겨 있는 대상과 관련된 정보를 테이블 형태로 담고 있다.
	- 각각의 행을 엔트리라고 부른다.
- 디렉터리 엔트리만 보아도 해당 디렉터리에 무엇이 담겨 있는지, 어디에 있는지를 직간접적으로 알 수 있다.

## 15-2 파일 시스템
- 파일과 디렉터리를 보조기억장치에 일목요연하게 저장하고 접근할 수 있게 하는 운영체제 내부 프로그램을 파일 시스템이라고 한다.

### 파티셔닝과 포매팅
- 보조기억장치를 사용하려면 파티션을 나누는 작업(파티셔닝)과 포맷 작업(포매팅)을 거쳐야 한다.
- 파티셔닝은 저장 장치의 논리적인 영역을 구획하는 작업을 의미
	- 파티셔닝 작업을 통해 나누어진 영역 하나하나를 파티션이라고 한다.
- 포매팅은 파일 시스템을 설정하여 어떤 방식으로 파일을 저장하고 관리할 것인지를 결정하고, 새로운 데이터를 쓸 준비를 하는 작업을 의미한다.

### 파일 할당 방법
- 운영체제는 파일과 디렉터리를 블록단위로 읽고 쓴다.
	- 하드 디스크의 가장 작은 저장 단위는 섹터
	- 하나 이상의 섹터를 블록이라는 단위로 묶은 뒤 블록 단위로 파일과 디렉터리를 관리
- 파일 보조기억장치에 할당하는 방법 두가지
	- **연속 할당**
		- 가장 단순한 방식
		- 보조기억장치 내 연속적인 블록에 파일을 할당하는 방식
		- 외부 단편화 문제 야기
	- 불연속 할당
		- **연결 할당**
			- 각 블록 일부에 다음 블록의 주소를 저장하여 각 블록이 다음 블록을 가리키는 형태로 할당하는 방식
			- 연결 리스트로 관리
			- 연결 할당을 변형한 대표적인 파일 시스템 : FAT 파일 시스템
			- 단점
				- 반드시 첫 번째 블록부터 하나씩 차례대로 읽어야함
					- 임의 접근속도가 매우 느리다.
				- 하드웨어 고장이나 오류 발생 시 해당 블록 이후 블록은 접근할 수 없다.
		- **색인 할당**
			- 파일의 모든 블록 주소를 색인 블록이라는 하나의 블록에 모아 관리하는 방식
			- 색인 할당을 사용하는 파일 시스템에서는 디렉터리 엔트리에 파일 이름과 더불어 색인 블록 주소를 명시

### 파일 시스템 살펴보기
**FAT 파일 시스템**
- USB 메모리, SD 카드 등의 저용량 저장 장치에서 사용
- 연결 할당의 단점을 보완한 파일 시스템
- 각 블록에 포함된 다음 블록의 주소들을 한데 모아 테이블 형태로 관리
- 파일 할당 테이블(File Allocation Table)
- FAT는 파티션의 앞부분에 만들어진다.

**유닉스 파일 시스템**
- 색인 할당 기반
- 색인 블록을 i-node라고 부른다.
- i-node의 크기는 유한
- 큰 파일일 경우 다음과 같이 해결한다.
	- 블록 주소 중 열두 개에는 직접 블록 주소를 저장
		- 파일 데이터가 저장된 블록을 직접 블록이라고 한다.
	- 충분하지 않다면 열세 번째 주소에 단일 간접 블록 주소를 저장
		- 단일 간접 블록이란 파일 데이터가 저장된 블록이 아닌 파일 데이터를 저장한 블록 주소가 저장된 블록을 말한다.
	- 충분하지 않다면 열네 번째 주소에 이중 간접 블록 주소를 저장
		- 이중 간접 블록이란 데이터 블록 주소를 저장하는 블록 주소가 저장된 블록을 의미
	- 충분하지 않다면 열다섯 번째 주소에 삼중 간접 블록 주소를 저장
		- 삼중 간접 블록이란 이중 간접 블록 주소가 저장된 블록
