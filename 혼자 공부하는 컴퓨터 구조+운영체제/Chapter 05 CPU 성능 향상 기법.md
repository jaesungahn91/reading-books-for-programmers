## 05-1 빠른 CPU를 위한 설계 기법
### 클럭
- 컴퓨터 부품들은 '클럭 신호'에 맞춰 일사불란하게 움직인다.
- CPU는 '명령어 사이클'이라는 정해진 흐름에 맞춰 명령어들을 실행한다.
- 클럭 신호가 빠르게 반복 -> 컴퓨터 부품이 빠른 박자에 작동
- 클럭 속도가 높아지면 CPU는 명령어 사이클을 더 빠르게 반복
- 클럭 속도 = CPU 속도
- 클럭 속도의 단위는 헤르츠(Hz), 이는 1초에 클럭이 몇 번 반복되는지를 나타냄
	- 1GHz = 1,000,000,000(10^9)Hz
- 최대 클럭 속도를 강제로 끌어올리는 것 : 오버클럭킹
- 클럭 속도를 무작정 높이면 발열 문제 발생
	- 클럭 속도만으로 CPU의 성능을 올리는 것에는 한계가 있다.

### 코어와 멀티코어
- CPU의 성능을 높이는 또다른 방법은 CPU의 코어와 스레드 수를 늘리는 방법이다.
- 명령어를 실행하는 부품 : 코어
- 명령어를 실행하는 부품을 여러 개 포함하는 부품 : CPU 명칭의 범위 확장
- 코어를 여러 개 포함하고 있는 CPU : 멀티코어 CPU 또는 멀티코어 프로세서
- CPU의 연산 속도가 꼭 코어 수에 비례하여 증가하지는 않는다.
	- 코어마다 처리할 연산이 적절히 분배되지 않는다면 코어 수에 비례하여 연산 속도가 증가하지 않는다.
	- 처리하고자 하는 작업량보다 코어 수가 지나치게 많아도 성킁에는 크게 영향이 없다.

### 스레드와 멀티스레드
- 스레드 : 실행 흐름의 단위
	- 하드웨어적 스레드
	- 소프트웨어적 스레드

**하드웨어적 스레드**
- 하나의 코어가 동시에 처리하는 명령어 단위
- 여러 스레드를 지원하는 CPU는 하나의 코어로도 여러 개의 명령어를 동시에 실행
	- 멀티스레드 프로세서 또는 멀티스레드 CPU라고 함
- 인텔의 멀티스레드 기술 = 하이퍼스레딩

**소프트웨어적 스레드**
- 하나의 프로그래밍에서 독립적으로 실행되는 단위

**멀티스레드 프로세서**
- 멀티스레드 프로세서의 가장 큰 핵심은 레지스터
- 하나의 코어로 여러 명령어를 동시에 처리하도록 하려면 명령어를 처리하기 위해 꼭 필요한 레지스터를 여러개 가지고 있어야 한다.
- 프로그램 입장에서 봤을 때 하드웨어 스레드는 마치 '한 번에 하나의 명령어를 처리하는 CPU'다름 없음 -> 때문에 하드웨어 스레드를 논리 프로세서라고 부르기도 한다.
- 코어 : 명령어를 실행할 수 있는 '하드웨어 부품'
- 스레드 : '명령어를 실행하는 단위'
- 멀티코어 프로세서 : 명령어를 실행할 수 있는 하드웨어 부품이 CPU안에 두 개 이상 있는 CPU
- 멀티스레드 프로세서 : 하나의 코어로 여러개의 명령어를 동시에 실행할 수 있는 CPU

## 05-2 명령어 병렬 처리 기법
> 명령어 병령 처리기법이란 명령어를 동시에 처리하여 CPU를 한시도 쉬지 않고 작동시키는 기법이다.
> 명령어 병령 처리기법에는 명령어 파이프라이닝, 슈퍼스칼라, 비순차적 명령어 처리가 있다.

### 명령어 파이프라인
- 명령어 처리과정을 클럭 단위로 나누어 보면 일반적으로 다음과 같다.
	- 명령어 인출
	- 명령어 해석
	- 명령어 실행
	- 결과 저장
- 같은 단계가 겹치지만 않는다면 CPU는 각 단계를 동시에 실행할 수 있다.
- 공장 생산 라인과 같이 명령어들은 명령어 파이프라인에 넣고 동시에 처리하는 기법을명령어 파이프라이닝이라고 한다.
- 특정 상황에서 성능 향상에 실패하는 상황을 파이프라인 위험이라고 한다.
	- 크게 데이터 위험, 제어 위험, 구조적 위험이 있다.

**데이터 위험**
- 데이터 위험은 명령어 간 '데이터 의존성'에 의해 발생

**제어 위험**
- 제어 위험은 주로 분기 등으로 인한 '프로그램 카운터의 갑작스러운 변화'에 의해 발생
- 이를 위해 어디로 분기할지 미리 예측한 후 그 주소를 인출하는 분기 예측 기술을 사용

**구조적 위험**
- 구조적 위험은 명령어들을 겹쳐 실행하는 과정에서 서로 다른 명령어가 동시에 ALU, 레지스터 등과 같은 CPU 부품을 사용하려고 할 때 발생
- 자원 위험이라고도 부른다.

### 슈퍼스칼라
- CPU 내부에 여러 개의 명령어 파이프라인을 포함한 구조를 슈퍼스칼라라고 한다.
- 슈퍼스칼라 구조로 명령어 처리가 가능한 CPU를 슈퍼스칼라 프로세서 또는 슈퍼스칼라 CPU라고 한다.
- 슈퍼스칼라 방식을 차용한 CPU는 파이프라인 위험을 방지하기위해 고도로 설계되어야 한다.

### 비순차적 명령어 처리
- 보통 OoOE라고 부르며, 명령어들은 순차적으로 실행하지 않는 기법이다.
- 순서를 바꿔 실행해도 무방한 명령어를 먼저 실행하여 명령어 파이프라인이 멈추는 것을 방지하는 기법을 말한다.

## 05-3 CISC와 RISC
> 명령어 파이프라이닝과 슈퍼스칼라 기법을 실제로 CPU에 적용하려면 명려어가 파이프라이닝에 최적화되어 있어야 한다.
> CPU언어 ISA, ISA기반으로 설계된 CISC, RISC

### 명령어 집합
- CPU가 이해할 수 있는 명령어들의 모음을 명령어 집합 또는 명령어 집합 구조(Instruction Set Architecture) ISA라고 한다. 즉, CPU마다 ISA가 다를 수 있다.
- 인텔 노트북 CPU는 x86 or x86-64 ISA이해
- 애플 아이폰 CPU는 ARM ISA를 이해
- ISA가 다르다는 건 CPU가 이해할 수 있는 명령어가 다르다는 뜻이고 명령어가 달라지면 어셈블리어도 달라진다.
- 사용한 컴파일러에 따라서도 어셈블리어가 달라질 수 있다.
- ISA는 일종의 CPU의 언어이다.
- ISA가 다르면 제어장치가 명령어를 해석하는 방식, 사용되는 레지스터의 종류과 개수, 메모리 관리 방법 등 많은것이 달라진다.
- ISA는 CPU의 언어임과 동시에 CPU를 비롯한 하드웨어가 소프트웨어를 어떻게 이해할지에 대한 약속이다.

### CISC
- CISC는 Complex Instruction Set Computer의 약자
- '복잡한 명령어 집합을 활용하는 컴퓨터'를 의미
- x85, x86-64는 대표적인 CISC 기반의 ISA
- 명령어의 형태와 크기가 다양한 가변 길이 명령어 활용
- 다양하고 강력한 명령어를 활용한다는 말은 상대적으로 적은 수의 명령어로도 프로그램을 실행할 수 있다는 것을 의미
- CISC는 메모리를 최대한 아끼며 개발해야 했던 시절에 인기
- 단점
	- 
