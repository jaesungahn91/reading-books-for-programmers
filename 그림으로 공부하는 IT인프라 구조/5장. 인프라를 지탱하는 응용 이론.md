## 5.1 캐시
### 5.1.1 캐시란?
- 캐시에는 '숨기는 장소'라는 의미가 있다.
- 캐시는 사용 빈도가 높은 데이터를 고속으로 액세스할 수 있는 위치에 두는 것을 의미
	- CPU 1차-2차캐시, 저장소 캐시, OS 페이지 캐시, 데이터베이스 버퍼 캐시 등 광범위
- 캐시는 임시 저장소를 의미
- 특징
	- 일부 데이터를 데이터 출력 위치와 가까운 지점에 일시적으로 저장
	- 데이터 재사용을 전제로 함

### 5.1.2 어디에 사용되나?
- 웹 브라우저 접속한 페이지 캐시
- 캐시서버 또는 CDN

### 5.1.3 정리
- 주요 장점
	- 데이터에 고속으로 액세스
	- 실제 데이터에 대한 액세스 부하를 줄일 수 있음
- 적합한 시스템
	- 참조 빈도가 높은 데이터
	- 캐시 데이터가 손실돼도 문제가 없는 시스템
- 부적합한 시스템
	- 데이터 갱신 빈도가 높은 시스템
	- 대량의 데이터에 엑세스하는 시스템
- 주의사항
	- 데이터가 실제 데이터와 캐시라는 이중 구조 -> 리소스 소비가 늘어남
	- 시스템 가동 직후 등에는 캐시에 데이터가 없기 때문에 성능 향상 X
	- 설계 시에 복구 순서를 확립

## 5.2 끼어들기
### 5.2.1 끼어들기란?
- 지금 하고 있는 일을 중단하고 급히 다른일을 하는 것
	- 급한 일을 먼저 하도록 CPU에 알리는 중요한 역할

### 5.2.2 자세히 보자
- 끼어들기는 진행 중인 일을 중단하고 급한 일을 끝낸 후에 다시 원래 일을 진행하는 것
	- ex) 키보드 입력과 같은 특정 이벤트

### 5.2.3 어디에 사용되나?
- 입출력 장치가 CPU에게 통지하는 끼어들기 = 하드웨어 끼어들기
- 허가되지 않는 메모리에 액세스 시 '조각화 위반' 예외 발생 -> 프로세스 강제 종료 = 소프트웨어 끼어들기
### 5.2.4 정리
- '이벤트 주도' 구조

## 5.3 폴링
### 5.3.1 폴링이란?
- 정기적으로 질의하는 것
- 특징
	- 질의 방향이 단방향
	- 질의는 일정 간격을 따라 정기적으로 발생
- 장점
	- 구현이 쉬움
	- 상대가 응답하는지 확인 가능
	- 모아서 일괄 처리 가능
- 폴링과 반대되는 것이 이벤트 주도 또는 끼어들기 방식

### 5.3.2 어디에 사용되나?
- 웹로직 서버의 내부 감시 기능
- NTP(시간 동기)처리
	- 정기적으로 실시해서 자신의 시간이 맞는지 확인하는 구조

### 5.3.3 정리
- 적합한 처리
	- 일정 간격으로 처리를 실행하면 좋은 처리
	- 감시
		- 자발적으로 상태를 전달 할 수 없는 경우
- 부적합한 처리
	- 상태가 아닌 입력 내용에 따라 실행 내용을 변경하는 처리
	- 처리 우선순위를 정해야 하는 처리
- 주의 사항
	- 처리 지연 시간을 줄이기 위해 폴링 간격을 너무 짧게 잡으면 트래픽 양이 증가하므로 주의가 필요

## 5.4 I/O 크기
### 5.4.1 I/O 크기란?
- 1회의 I/O에 필요한 사이즈, 데이터를 주고 받을 때 사용되는 I/O의 크기를 의미
- 특징
	- 물건을 운반할 때는 상자에 넣으면 효율적으로 관리 가능
	- 운반하는 양에 따라 상자 크기를 선택하면 효율적으로 운반 가능

### 5.4.2 어디에 사용되나?
- 오라클 DB 예
	- I/O 크기가 작을 때는 블록 크기를 작게, I/O 크기가 크면 블록 크기를 크게 해야 I/O 효율이 좋아진다.
- OS 계층 - ext3 파일 시스템
- 네트워크 예
	- 송신 버퍼가 TCP 세그먼트로 분할될 때 MSS(MAximum Segment Size)를 초과하지 않는 범위에서 분할
	- IP 소켓의 최대 크기를 MTU(Maximum Transfer Unit)라고 함

### 5.4.3 정리
- 처리량/지연 시간 중시에 따른 트레이드오프
- 'db file scattered read'는 처리량 중시, 'db file sequential read'는 지연 시간 중시

## 5.5 저널링
### 5.5.1 저널링이란?
- 저널은 트랜잭션이나 매일 갱신되는 데이터의 변경 이력, 저널을 남겨 두는 것을 저널링이라고 한다
- 특징
	- 데이터 자체가 아닌 처리 내용을 기록
	- 데이터 일관성이나 일치성이 확보되면 필요 없어짐
	- 데이터 복구 시 롤백, 롤포워드에 이용

### 5.5.2 어디에 사용되나?
- 리눅스의 ext3 파일 시스템
	- 파일 I/O
	- 트랜잭션 시에 버퍼 정보를 디스크에 기록하지 않기 때문에 버퍼에 있는 최신 데이터를 잃을 수도 있다.
	- 기본 설정에서는 5초에 한번 기록
- 오라클 DB
	- REDO로그로 불림
	- 오라클 이외의 DB에서는 WAL(Write Ahead Log)이라고 부르기도 한다.

### 5.5.3 정리
- 장점
	- 시스템 장애 시 복구가 빠르다
	- 데이터 복제보다도 적은 리소스를 소비해서 데이터를 보호
- 적합한 시스템
	- 데이터 갱신이 발생하는 시스템
- 부적합한 시스템
	- 데이터 안정성보다 성능을 요구하는 시스템
		- 기록 처리 시 오버헤드 발생
- 저널을 사용한 복구 - 롤백, 롤포워드
	- 롤백은 저널을 읽어서 실제 데이터 정보를 과거로 되돌리는 처리
	- 롤포워드는 저널을 읽어서 실제 데이터 정보를 앞으로 진행시키는 처리
- 주의점
	- 디스크 기록 시점을 검토, 조절
	- 트랜잭션 단위가 크면 트랜잭션 도중에 장해가 발생할 가능성이 높아짐

## 5.6 복제
### 5.6.1 복제란?
- 복제는 DB나 저장소 등에서 자주 사용되는 기술
	- 재해 데이터 센터(예비 시스템)
	- 동일 데이터를 여러 서버에 복제해서 부하분산
- 특징
	- 장애 시 데이터 손실을 예방할 수 있다
	- 복제를 이용한 부하분산이 가능
- 장점
	- 사용자가 데이터에 액세스할 때 복제한 것이라는 것을 의식할 필요 없음
	- 복제 데이터를 캐시처럼 사용할 수 있음

### 5.6.3 정리
- 적합한 시스템
	- 데이터 손실을 허용하지 않고 장해 시 복구 속도가 빨라야 하는 시스템
	- 데이터 참조와 갱신 부분이 나뉘어져 있으며, 참조가 많은 시스템
- 부적합한 시스템
	- 데이터 갱신이 많은 시스템
- 주의 사항
	- 복제 위치가 많으면 갱신이 많은 시스템과 같이 복제 오버헤드가 높아짐
	- 실제 데이터와 복제 데이터를 완전히 일치시키고 싶으면 복제 데이터의 쓰기 완료 처리를 보장해야함. 이 경우 시스템 응답이 악화될 수 있음
	- 시스템 유지관리나 장애 시에는 복제 데이터도 고려해야