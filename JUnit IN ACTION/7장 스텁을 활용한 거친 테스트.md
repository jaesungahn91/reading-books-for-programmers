- 가짜 객체를 활용하는 방법은 크게 두 가지다. 하나는 스텁을 활용하는 것이고 다른 하나는 모의 객체를 활용하는 것이다.
## 7.1 스텁 살펴보기
- 스텁은 실제 코드 혹은 아직 구현되지 않은 코드의 동작을 가장하기 위한 장치
- 호출자를 실제 구현 코드에서부터 격리하기 위해 실제 코드 대신 런타임에 동작하는 코드를 말한다.
- 활용하기 좋은 경우
	- 기존 시스템이 너무 복잡하고 깨지기 쉬워 수정이 어려울 때
	- 소스 코드가 통제할 수 없는 외부 환경에 의존하고 있을 때
	- 파일 시스템, 서버, 데이터베이스 같은 외부 시스템을 완전히 교체해야 할 때
	- 하위 시스템 간 통합 테스트 같은 거친 테스트를 수행해야 할 때
- 스텁을 활용하기 어려운 경우
	- 실패의 원인을 밝힐 수 있는 정확한 에러 메시지를 확인하기 위해 세밀한 테스트가 필요할 때
	- 코드 전체가 아니라 일부분만 격리해 테스트를 수행해야 할 때
- 단점
	- 작성하기가 까다롭다
	- 유지 보수가 어려울 수 있다.
	- 세밀한 단위 테스트에는 적합하지 않을 수 있다.
	- 테스트에 따라 다른 스텁을 만들어야 할 수도 있다.

## 7.2 스텁으로 HTTP 연결 테스트하기
- 만약 스텁으로 대체하는 것이 가능하려면 스텁으로 대체할 코드에 잘 정의된 인터페이스가 있는 것이 좋고, 스텁을 구현할 수 있도록 다양한 구현체를 생성하는 것이 허용되어야 한다.

### 7.2.1 무엇을 스텁으로 대체할 것인가
- 상대적으로 쉬운 해결책은 스텁으로 사용할 아파치 테스트서버를 설치하고 테스트 서버에서 기본으로 보여 줄 간단한 웹 페이지를 만드는 것
- 내장 웹 서버를 사용

### 7.2.2 Jetty를 내장 웹 서버로 활용하기
- JUnit 5 테스트 코드에서 서버를 구동하고 자바로 테스트를 작성한 다음 테스트 묶음을 자동화

## 7.3 스텁으로 웹 서버 리소스 만들기
- 스텁은 단순하게 만들어야 하며, 애플리케이션 개발에 들이는 것만큼의 노력을 스텁을 테스트하고 유지 보수하는 데 들여서는 안된다

## 7.4 스텁으로 HTTP 연결 만들기
- HttpURLConection 클래스에 대한 모든 호출을 스텁으로 만든 클래스로 리다이렉트할 수 있으며 이 클래스는 테스트에 필요한 모든 것을 반환

### 7.4.3 HTTP 연결을 스텁으로 대체한 테스트 수행하기
- 웹 리소스를 스텁으로 만드는 것보다 HTTP 연결을 스텁으로 만드는 것이 쉽다. HTTP 연결을 스텁으로 만들면 통합 테스트를 할 수는 없다.
