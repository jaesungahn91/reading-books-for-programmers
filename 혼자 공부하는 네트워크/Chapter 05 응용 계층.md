## 05-1 DNS와 자원
- 송수신하고자 하는 정보를 식별하기 위한 방법으로는 위치 기반의 식별자인 URL과 이름 기반의 식별자인 URN이 있다.

### 도메인 네임과 네임 서버
- 도메인 네임은 호스트의 IP 주소와 대응되는 문자열 형태의 호스트 특정 정보
- 도메인 네임과 IP 주소는 네임 서버에서 관리, DNS 서버라고도 한다.
- IP 주소에 비해 기억하기 쉬울뿐더러, IP 주소가 바뀌더라도 바뀐 IP 주소에 도메인 네임을 다시 대응하면 된다는 장점이 있다.
- 도메인 네임은 점(.)을 기준으로 계층적으로 분류
- 최상단에 루트 도메인 다음 단계인 최상이 도메인, 계속 그다음 단계의 도메인이 있다.
- 루트 도메인은 점으로 표현되며 도메인 네임의 마지막에 점이 찍힌 형태로 표기(일반적으로는 루트 도메인을 생략)
- 최상위 도메인의 하부 도메인은 2단계 도메인이라고 한다.
- 도메인 네임을 모두 포함하는 도메인 네임을 전체 주소 도메인 네임(FQDN)이라고 한다.
- FQDN의 첫 번째 부분(www)을 호스트 네임이라 부르기도 한다.
- 분산된 도메인 네임에 대한 관리 체계를 도메인 네임 시스템, 줄여서 DNS라고 한다.

### 계층적 네임 서버
- 도메인 네임에 대응되는 IP 주소를 알아내는 과정을 흔히 '도메인 네임 풀이한다' 또는 '리졸빙한다'라고 표현한다.
- 네임 서버의 유형은 크게 네가지
	- 로컬 네임서버 : 클라이언트와 맞 닿아 있는 네임 서버
		- 로컬 네임 서버의 주소는 일반적으로 ISP에서 할당하거나 공개 DNS 서버를 이용
	- 루트 네임 서버 : 루트 도메인을 관장하는 네임 서버
	- TLD(최상위 도메인) 네임 서버 : TLD를 관리하는 네임 서버
		- 하위 도메인 네임을 관리하는 네임 서버 주소를 반환할 수 있다.
	- 책임 네임 서버 : 특정 도메인 영역을 관리하는 네임 서버
		- 자신이 관리하는 도메인 영역의 질의에 대해서는 다른 네임 서버에 떠넘기지 않고 곧바로 답할 수 있는 네임 서버
- 네임 서버들은 계층적인 구조
- 질의하는 방법 두 가지
	- 재귀적 질의 : 다음 단계에 질의하는 과정을 반복하며 최종 응답 결과를 역순으로 전달받는 방식
	- 반복적 질의 : 로컬 네임 서버가 계층 마다 반복적으로 질의를 통해 최종 응답 결과를 클라이언트에게 알려 주는 방식
- DNS 캐시 : 네임 서버들이 기존에 응답받은 결과를 임시로 저장했다가 추후 같은 질의에 활용
	- TTL : 캐시될 수 있는 시간

### 자원을 식별하는 URI
- 자원이란 네트워크상의 메시지를 통해 주고받는 대상을 의미, 즉 정보를 주고받을 때, 송수신하는 대상이 바로 자원
	- HTTP 통신에서는 'HTTP 요청 메시지의 대상'이라고도 표현(RFC 9110)
- 자원을 식별할 수 있는 정보를 URI라고 부른다.
	- 위치를 이용해 자원을 식별 => URL
	- 이름을 이용해 자원을 식별 => URN

**URL**
- scheme : 자원에 접근하는 방법, 일반적으로 사용할 프로토콜
- authority :  호스트를 특정할 수 있는 정보, IP 주소 혹은 도메인 네임
- path : 자원이 위치한 경로, 슬래쉬를 기준으로 계층적으로 표현
- query : 더 많은 정보가 필요할 때 쿼리 문자열, 쿼리 파라미터를 사용
- fragment : 자원의 한조각을 가리키기 위한 정보, HTML 파일과 같은 자원에서 특정 부분을 가르키기 위해 사용

**URN**
- 자원에 고유한 이름을 붙이는 이름 기반 식별자
- 널리 채택된 방식은 아니다.

## 05-2 HTTP
### HTTP의 특성
- 요청-응답 기반 프로토콜
	- 클라이언트-서버 구조 기반의 요청-응답 프로토콜
- 미디어 독립적 프로토콜
	- 미디어 타입 : 메시지로 주고받는 자원의 종류. MIME 타입이라고도 한다.
	- 미디어 타입에 특별히 제한을 두지 않고 독립적으로 동작이 가능한 미디어 독립적이 프로토콜
	- `타입/서브타입` 형식
	- 타입은 데이터의 유형, 서브타입은 주어진 타입에 대한 세부 유형
	- `타입/서브타입;매개변수=값` 선택적으로 매개변수가 포함될 수도 있다.
- 스테이트리스 프로토콜
	- 상태를 유지하지 않는 프로토콜
	- 기본적으로 독립적인 유형으로 간주
	- 따라서 확장성과 견고성이 높다
- 지속 연결 프로토콜
	- HTTP 버전 1.1 이상은 지속 연결이라는 기술 제공
	- 킵 얼라이브라고도 부른다

### HTTP 메시지 구조(1.1v 위주)
- 시작 라인
	- 요청 메시지일 경우 -> 요청 라인
		- 메서드, 요청 대상, HTTP 버전
	- 응답 메시지일 경우 -> 상태 라인
		- HTTP 버전, 상태 코드, 이유 구문
- 필드 라인
	- 0개 이상의 HTTP 헤더가 명시, 헤더 라인이라고도 부른다
	- 필요한 경우 메시지 본문 명시

### HTTP 메서드
- GET : 자원을 습득하기 위한 메서드
- HEAD : GET과 동일하나, 헤더만을 응답받는 메서드
- POST : 서버로 하여금 특정 작업을 처리하게끔 하는 메서드
- PUT : 자원을 대체하기 위한 메서드
- PATCH : 자원에 대한 부분적 수정을 위한 메서드
- DELETE : 자원을 삭제하기 위한 메서드
- CONNECT : 자원에 대한 양방향 연결을 시작하는 메서드
- OPTIONS : 사용 가능한 메서드 등 통신 옵션을 확인하는 메서드
- TRACE : 자원에 대한 루프백 테스트를 수행하는 메서드

### HTTP 상태 코드
- 백의 자리수를 기준으로 유형을 구분

**200번대 : 성공 상태 코드**
- 200 : OK / 요청이 성공했음
- 201 : Created / 요청이 성공했으며, 새로운 자원이 생성되었음
- 202 : Accepted / 요청을 잘 받았으나, 아직 요청한 작업을 끝내지 않았음
- 204 : No Content / 요청이 성공했지만, 메시지 본문으로 표시할 데이터가 없음

**300번대 : 리다이렉션 상태 코드**
- 리다이렉션 : 요청을 완수하기 위해 추가적인 조치가 필요한 상태, 클라이언트가 요청한 자원이 다른 곳에 있을 때, 요청을 다른 곳으로 이동시키는 것을 의미
- 영구적인 리다이렉션
	- 301 : Moved Permanently / 영구적 리다이렉션; 재요청 메서드 변경될 수 있음
	- 308 : Permanent Redirect / 영구적 리다이렉션; 재용청 메서드 변경되지 않음
- 일시적인 리다이렉션
	- 302 : Found / 일시적 리다이렉션; 재요청 메서드 변경될 수 있음
	- 303 : See Other / 일시적 리다이렉션; 재요청 메서드 GET으로 변경
	- 307 : Temporary Redirect / 일시적 리다이렉션; 재요청 메서드 변경되지 않음

**400번대 : 클라이언트 에러 상태 코드**
- 400 : Bad Request / 클라이언트 요청이 잘못되었음
- 401 : Unauthorized / 요청한 자원에 대한 유효한 인증이 없음
- 403 : Forbidden / 요청이 서버에 의해 거부됨(접근 권한이 없을 경우 등)
- 404 : Not Found / 요청받은 자원을 찾을 수 없음
- 405 : Method Not Allowed / 요청한 메서드를 지원하지 않음
```
인증 : 자신이 누구인지 증명하는 것
권한 부여(인가) : 인증된 주체에게 작업을 허용하는 것
```

**500번대 : 서버 에러 상태 코드**
- 500 : Internal Server Error / 요청을 처리할 수 없음
- 502 : Bad Gateway / 중간 서버의 통신 오류
- 503 : Service Unavailable / 현재는 요청을 처리할 수 없으나 추후 가능할 수도 있음

## 05-3 HTTP 헤더와 HTTP 기반 기술
- 필드 라인에는 HTTP 헤더들이 명시
### HTTP 헤더
**요청 시 활용되는 HTTP 헤더**
- Host : 요청을 보낼 호스트를 나타내는 헤더
- User-Agent : 웹 브라우저와 같이 HTTP 요청을 시작하는 클라이언트 측의 프로그램을 의미
	- 운영체제, 브라우저 종류 및 버전, 렌더링 엔진과 같은 다양한 정보
- Referer : 클라이언트가 요청을 보낼 떄 머무르고 있던 URL 명시
- Authorization : 클라이언트의 인증 정보를 담는 헤더
	- `인증 타입과 인증을 위한 정보`가 차례로 명시

**응답 시 활용되는 HTTP 헤더**
- Server : 요청을 처리하는 서버 측의 소프트웨어와 관련된 정보를 명시
- Allow : 허용된 HTTP 메서드 목록을 알려 주기 위해 사용
- Retry-After : 자원을 사용할 수 있는 날짜 혹은 시각을 나타낸다.
- Location : 자원을 위치를 알려주기 위한 헤더
- WWW-Authenticate : 자원에 접근하기 위한 인증 방식을 설명하는 헤더

**요청과 응답 모두에서 활용되는 HTTP 헤더**
- Date : 메시지가 생성된 날짜와 시각에 관련된 정보를 담은 헤더
- Connection : 클라이언트의 요청과 응답 간의 연결 방식을 설정하는 헤더
- Content-Length : 본문의 바이트 단위 크기(길이)를 나타낸다.
- Content-Type, Content-Language, Content-Encoding : 표현 헤더의 일종
	- 메시지 본문에서 사용된 미디어타입
	- 메시지 본문에 사용된 자연어
	- 메시지 본문을 압축하거나 변환한 방식이 명시

### 캐시
- 캐시란 불필요한 대역폭 낭비와 응답 지연을 방지하기 위해 정보의 사본을 임시로 저장하는 기술
- 개인 전용 캐시 : 웹 브라우저에 저장, 공용 캐시 : 클라이언트와 서버 사이에 위치한 중간 서버에 저장
- 캐시된 사본 데이터가 얼마나 최신 원본 데이터와 유사한지를 캐시 신선도라고 표현
	- 신선도를 유지하는 가장 기본적인 방법은 '캐시된 데이터에 유효 기간을 설정하는 방법'
		- Expires : 날짜
		- Cache-Control 헤더의 Max-Age : 값(초)
	- 캐시의 신선도를 재검사하는 방법
		- 날짜 기반
			- If-Modified-Since : 특정 시점 이후로 원본 데이터에 변경이 있었는지 확인
			- Last-Modified : 마지막으로 수정된 시점
		- 엔티티 태그
			- If-None-Match : 버전이 일치하는지 확인

### 쿠키
- 쿠키란 서버에서 생성되어 클라이언트 측에 저장되는 데이터
- 응답 메시지의 Set-Cookie 헤더와 요청 메시지의 Cookie 헤더를 통해 전달

### 콘텐츠 협상과 표현
- 콘텐츠 협상이란 같은 URI에 대해 가장 적합한 '자원의 형태'를 제공하는 메커니즘을 의미
- '송수신 가능한 자원의 형태'를 자원의 표현이라고 한다.
- 주요 헤더
	- Accept, Accept-Language, Accept-Charset, Acccept-Encoding
	- 우선 순위는 q 값으로 표현