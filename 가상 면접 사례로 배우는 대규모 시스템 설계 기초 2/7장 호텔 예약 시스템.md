## 1단계 : 문제 이해 및 설계 범위 확정
### 비기능 요구사항
- 높은 수준의 동시성 지원
- 적절한 지연 시간
### 개략적 규모 추정
- 총 5,000개 호텔, 100만 개의 객실
- 평균 70% 객실 사용, 평균 투숙 기간 3일
- 일일 예상 예약 건수 : 240,000
- 초당 예약 건수 : 3
## 2단계 : 개략적 설계안 제시 및 동의 구하기
### 데이터 모델
- 관계형 데이터베이스 선택
	- 읽기가 압도적인 작업 흐름
	- ACID 속성에 적합
	- 데이터 쉽게 모델링
- 객실 번호는 체크인 시 부여되는 점 주의
### 개략적 설계안
- 사용자
- 관리자
- CDN
- 공개 API GW
- 내부 API
- 호텔 서비스
- 요금 서비스
- 예약 서비스
- 결제 서비스
- 호텔 관리 서비스
## 3단계 : 상세 설계
### 개선된 데이터 모델
- 객실 유형을 담는 테이블을 둠
- 예약 데이터가 단일 데이터베이스에 담기에 너무 클 경우
	- 현재 및 향후 예약 데이터만 저장
	- 데이터베이스 샤딩
### 동시성 문제
- 같은 사용자가 예약 버튼을 여러 번 누를 경우
	- 클라이언트 측 구현 : 예약버튼 비활성화
	- 멱등 API
- 여러 사용자가 같은 객실을 동시에 예약하는 경우
	- 락을 활용
		- 비관적 락
		- 낙관적 락
		- 데이터베이스 제약 조건
### 시스템 규모 확장
- 데이터베이스 샤딩
	- 여러 호텔로의 확장일 경우 호텔 id를 키로 샤딩
- 캐시
	- 잔여 객실 확인 및 객실 예약 로직을 캐시 층에 둠
	- 확장성 및 처리량 증가, 데이터 일관성 유지에 대한 문제 해결 필요
### 서비스 간 데이터 일관성
- 마이크로서비스 아키텍처로 가정
	- 일반적으로 서비스 별 데이터베이스
	- 데이터 일관성 문제 해결 방안
		- 2단계 커밋
		- 사가