## 1단계 : 문제 이해 및 설계 범위 확정
### 비기능 요구사항
- 안정성
- 가용성
- 확장성
- 유연성과 확장성
### 개략적인 규모 추정
- 10억 명의 사용자
- QPS = 100,000
- 메타데이터 평균 50KB
- 1년 스토리지 요구사항 730PB
- 첨부 파일 비율 20%, 평균 크기 500KB
- 1년간 첨부 파일 보관 필요 용량 = 1,460PB
## 2단계 : 개략적 설계안 제시 및 동의 구하기
### 이메일 101
- 이메일 프로토콜
	- SMTP, POP, IMAP, HTTPS
### 분산 메일 서버
- 분산 메일 서버 아키텍처
	- 웹메일
	- 웹서버
	- 실시간 서버 : 이메일 내역을 실시간으로 전달(지속성 연결)
	- 메타데이터 데이터베이스
	- 첨부 파일 저장소
	- 분산 캐시
	- 검색 저장소
### 이메일 전송 절차
1. 전송
2. 요청 웹서버 전달
3. 메시지 큐
4. 외부 전송 담당 SMTP 작업 프로세스
5. 보낸 편지함 저장
### 이메일 수신 절차
- 로드밸런서
- SMTP 서버로 분산
- 첨부파일 저장
- 이메일 큐
- 메일 처리 작업 프로세스
- 이메일 저장소에 보관
- 온라인 상태인 경우 실시간 서버로 전달
## 3단계 : 상세 설계
### 메타데이터 데이터베이스
- 이메일 타래
	- 최초 메시지에 타태로 엮어 보여주는 기능
- 이메일 메타데이터 특성
	- 헤더는 작고, 빈번하게 사용
	- 본문 사용 빈도 낮음
	- 사용자 별로 격리 수행 작업 필요
	- 데이터 신선도는 데이터 사용 패턴에 영향
	- 안정성 보장 필요